<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Login</title>
    <meta charset="utf-8">
</head>
<body>
<label for="username">Login:</label><input id="username" type="text"><br>

<label for="password">Password</label><input id="password" type="password"><br>

<label for="vk_id">VK id</label><input id="vk_id" type="password"><br>

<button onclick="auth()">Try to login</button>
<span id="message"></span><br>

<button onclick="logout()">Log out</button>
<br>

<a href="register.html">Go to registration page</a>

<script type="text/javascript">
    function nullValidById(id) {
        let value = document.getElementById(id).value;
        return value === '' ? null : value;
    }

    function auth() {
        let data = {};
        let username = nullValidById("username");
        let password = nullValidById("password");
        let vk_id = nullValidById("vk_id");

        if (vk_id !== null) {
            data = {vk_id};
            username = password = vk_id;
        }

        data.username = username;
        data.password = password;

        $.post({
            url: "http://localhost:8080/sign/in",
            data: data,
            "success": function (msg) {
                document.getElementById("message").innerHTML = JSON.stringify(msg);
            },
            "error": function (msg) {
                document.getElementById("message").innerHTML = msg.responseText;
            }
        });
    }

    function logout() {
        $.post({
            url: "http://localhost:8080/sign/out",
            "success": function (msg) {
                document.getElementById("message").innerHTML = "You have been successfully logged out: " + JSON.stringify(msg);
            },
            "error": function (msg) {
                document.getElementById("message").innerHTML = "Wow! Error while logging out: " + JSON.stringify(msg);
            }
        });
    }
</script>
</body>
</html>